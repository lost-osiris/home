(function() {
  var Beautifiers, EventEmitter, Languages, Promise, _, _plus, allowUnsafeEval, editorconfig, extend, fs, logger, path, pkg, strip, trackingId, ua, version, yaml,
    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
    extend1 = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    hasProp = {}.hasOwnProperty,
    slice = [].slice;

  _ = require('lodash');

  _plus = require('underscore-plus');

  Promise = require('bluebird');

  Languages = require('../languages/');

  path = require('path');

  logger = require('../logger')(__filename);

  EventEmitter = require('events').EventEmitter;

  extend = null;

  ua = null;

  fs = null;

  strip = null;

  yaml = null;

  editorconfig = null;

  allowUnsafeEval = require('loophole').allowUnsafeEval;

  allowUnsafeEval(function() {
    return ua = require("universal-analytics");
  });

  pkg = require("../../package.json");

  version = pkg.version;

  trackingId = "UA-52729731-2";


  /*
  Register all supported beautifiers
   */

  module.exports = Beautifiers = (function(superClass) {
    extend1(Beautifiers, superClass);


    /*
      List of beautifier names
    
      To register a beautifier add its name here
     */

    Beautifiers.prototype.beautifierNames = ['uncrustify', 'align-yaml', 'autopep8', 'coffee-formatter', 'coffee-fmt', 'cljfmt', 'clang-format', 'crystal', 'dfmt', 'elm-format', 'hh_format', 'htmlbeautifier', 'csscomb', 'gherkin', 'gofmt', 'latex-beautify', 'fortran-beautifier', 'js-beautify', 'jscs', 'eslint', 'lua-beautifier', 'nginx-beautify', 'ocp-indent', 'perltidy', 'php-cs-fixer', 'phpcbf', 'prettydiff', 'pybeautifier', 'pug-beautify', 'puppet-fix', 'remark', 'rubocop', 'ruby-beautify', 'rustfmt', 'sass-convert', 'sqlformat', 'stylish-haskell', 'tidy-markdown', 'typescript-formatter', 'vue-beautifier', 'yapf', 'erl_tidy', 'marko-beautifier', 'formatR', 'beautysh'];


    /*
      List of loaded beautifiers
    
      Autogenerated in `constructor` from `beautifierNames`
     */

    Beautifiers.prototype.beautifiers = null;


    /*
      All beautifier options
    
      Autogenerated in `constructor`
     */

    Beautifiers.prototype.options = null;


    /*
      Languages
     */

    Beautifiers.prototype.languages = new Languages();


    /*
      Constructor
     */

    function Beautifiers() {
      this.getOptions = bind(this.getOptions, this);
      this.beautifiers = _.map(this.beautifierNames, function(name) {
        var Beautifier;
        Beautifier = require("./" + name);
        return new Beautifier();
      });
      this.options = this.loadOptions();
    }

    Beautifiers.prototype.loadOptions = function() {
      var error, options;
      try {
        options = require('../options.json');
        options = _.mapValues(options, function(lang) {
          var defaultIndentChar, defaultIndentSize, defaultIndentWithTabs, ref, ref1, scope, softTabs, tabLength;
          scope = lang.scope;
          tabLength = (ref = typeof atom !== "undefined" && atom !== null ? atom.config.get('editor.tabLength', {
            scope: scope
          }) : void 0) != null ? ref : 4;
          softTabs = (ref1 = typeof atom !== "undefined" && atom !== null ? atom.config.get('editor.softTabs', {
            scope: scope
          }) : void 0) != null ? ref1 : true;
          defaultIndentSize = (softTabs ? tabLength : 1);
          defaultIndentChar = (softTabs ? " " : "\t");
          defaultIndentWithTabs = !softTabs;
          if (_.has(lang, "properties.indent_size")) {
            _.set(lang, "properties.indent_size.default", defaultIndentSize);
          }
          if (_.has(lang, "properties.indent_char")) {
            _.set(lang, "properties.indent_char.default", defaultIndentChar);
          }
          if (_.has(lang, "properties.indent_with_tabs")) {
            _.set(lang, "properties.indent_with_tabs.default", defaultIndentWithTabs);
          }
          if (_.has(lang, "properties.wrap_attributes_indent_size")) {
            _.set(lang, "properties.wrap_attributes_indent_size.default", defaultIndentSize);
          }
          return lang;
        });
      } catch (error1) {
        error = error1;
        console.error("Error loading options", error);
        options = {};
      }
      return options;
    };


    /*
      From https://github.com/atom/notifications/blob/01779ade79e7196f1603b8c1fa31716aa4a33911/lib/notification-issue.coffee#L130
     */

    Beautifiers.prototype.encodeURI = function(str) {
      str = encodeURI(str);
      return str.replace(/#/g, '%23').replace(/;/g, '%3B');
    };

    Beautifiers.prototype.getBeautifiers = function(language) {
      return _.filter(this.beautifiers, function(beautifier) {
        return _.includes(beautifier.languages, language);
      });
    };

    Beautifiers.prototype.getBeautifierForLanguage = function(language) {
      var beautifier, beautifiers, preferredBeautifierName;
      beautifiers = this.getBeautifiers(language.name);
      logger.verbose('beautifiers', _.map(beautifiers, 'name'));
      preferredBeautifierName = atom.config.get("atom-beautify." + language.namespace + ".default_beautifier");
      beautifier = _.find(beautifiers, function(beautifier) {
        return beautifier.name === preferredBeautifierName;
      }) || beautifiers[0];
      return beautifier;
    };

    Beautifiers.prototype.getExtension = function(filePath) {
      if (filePath) {
        return path.extname(filePath).substr(1);
      }
    };

    Beautifiers.prototype.getLanguages = function(grammar, filePath) {
      var fileExtension, languages;
      fileExtension = this.getExtension(filePath);
      if (fileExtension) {
        languages = this.languages.getLanguages({
          grammar: grammar,
          extension: fileExtension
        });
      } else {
        languages = this.languages.getLanguages({
          grammar: grammar
        });
      }
      logger.verbose(languages, grammar, fileExtension);
      return languages;
    };

    Beautifiers.prototype.getLanguage = function(grammar, filePath) {
      var language, languages;
      languages = this.getLanguages(grammar, filePath);
      if (languages.length > 0) {
        language = languages[0];
      }
      return language;
    };

    Beautifiers.prototype.getOptionsForLanguage = function(allOptions, language) {
      var options, selections;
      selections = (language.fallback || []).concat([language.namespace]);
      return options = this.getOptions(selections, allOptions) || {};
    };

    Beautifiers.prototype.transformOptions = function(beautifier, languageName, options) {
      var beautifierOptions, field, fields, fn, i, op, transformedOptions, vals;
      beautifierOptions = beautifier.options[languageName];
      if (typeof beautifierOptions === "boolean") {
        return options;
      } else if (typeof beautifierOptions === "object") {
        transformedOptions = {};
        for (field in beautifierOptions) {
          op = beautifierOptions[field];
          if (typeof op === "string") {
            transformedOptions[field] = options[op];
          } else if (typeof op === "function") {
            transformedOptions[field] = op(options[field]);
          } else if (typeof op === "boolean") {
            if (op === true) {
              transformedOptions[field] = options[field];
            }
          } else if (_.isArray(op)) {
            fields = 2 <= op.length ? slice.call(op, 0, i = op.length - 1) : (i = 0, []), fn = op[i++];
            vals = _.map(fields, function(f) {
              return options[f];
            });
            transformedOptions[field] = fn.apply(null, vals);
          }
        }
        return transformedOptions;
      } else {
        logger.warn("Unsupported Language options: ", beautifierOptions);
        return options;
      }
    };

    Beautifiers.prototype.trackEvent = function(payload) {
      return this.track("event", payload);
    };

    Beautifiers.prototype.trackTiming = function(payload) {
      return this.track("timing", payload);
    };

    Beautifiers.prototype.track = function(type, payload) {
      var error, userId, uuid;
      try {
        if (atom.config.get("core.telemetryConsent") === "limited") {
          logger.info("Analytics is enabled.");
          if (!atom.config.get("atom-beautify.general._analyticsUserId")) {
            uuid = require("node-uuid");
            atom.config.set("atom-beautify.general._analyticsUserId", uuid.v4());
          }
          userId = atom.config.get("atom-beautify.general._analyticsUserId");
          if (this.analytics == null) {
            this.analytics = new ua(trackingId, userId, {
              headers: {
                "User-Agent": navigator.userAgent
              }
            });
          }
          return this.analytics[type](payload).send();
        } else {
          return logger.info("Analytics is disabled.");
        }
      } catch (error1) {
        error = error1;
        return logger.error(error);
      }
    };

    Beautifiers.prototype.beautify = function(text, allOptions, grammar, filePath, arg) {
      var onSave;
      onSave = (arg != null ? arg : {}).onSave;
      return Promise.all(allOptions).then((function(_this) {
        return function(allOptions) {
          return new Promise(function(resolve, reject) {
            var beautifier, beautifyOnSave, context, detail, fileExtension, langDisabled, language, options, repoBugsUrl, startTime, title, unsupportedGrammar;
            logger.info('beautify', text, allOptions, grammar, filePath, onSave);
            logger.verbose(allOptions);
            language = _this.getLanguage(grammar, filePath);
            if (!language) {
              unsupportedGrammar = true;
              logger.verbose('Unsupported language');
              if (onSave) {
                return resolve(null);
              }
            } else {
              logger.verbose("Language " + language.name + " supported");
              langDisabled = atom.config.get("atom-beautify." + language.namespace + ".disabled");
              unsupportedGrammar = false;
              if (langDisabled) {
                logger.verbose("Language " + language.name + " is disabled");
                return resolve(null);
              }
              beautifyOnSave = atom.config.get("atom-beautify." + language.namespace + ".beautify_on_save");
              if (onSave && !beautifyOnSave) {
                logger.verbose("Beautify on save is disabled for language " + language.name);
                return resolve(null);
              }
              options = _this.getOptionsForLanguage(allOptions, language);
              logger.verbose(grammar, language);
              logger.verbose("language options: " + (JSON.stringify(options, null, 4)));
              logger.verbose(language.name, filePath, options, allOptions);
              beautifier = _this.getBeautifierForLanguage(language);
              if (beautifier == null) {
                unsupportedGrammar = true;
                logger.verbose('Beautifier for language not found');
              } else {
                logger.verbose('beautifier', beautifier.name);
                options = _this.transformOptions(beautifier, language.name, options);
                _this.emit("beautify::start");
                context = {
                  filePath: filePath
                };
                startTime = new Date();
                beautifier.beautify(text, language.name, options, context).then(function(result) {
                  resolve(result);
                  _this.trackTiming({
                    utc: "Beautify",
                    utv: language != null ? language.name : void 0,
                    utt: new Date() - startTime,
                    utl: version
                  });
                  if (!result) {
                    return _this.trackEvent({
                      ec: version,
                      ea: "Beautify:Empty",
                      el: language != null ? language.name : void 0
                    });
                  }
                })["catch"](function(error) {
                  reject(error);
                  return _this.trackEvent({
                    ec: version,
                    ea: "Beautify:Error",
                    el: language != null ? language.name : void 0
                  });
                })["finally"](function() {
                  return _this.emit("beautify::end");
                });
              }
            }
            _this.trackEvent({
              ec: version,
              ea: "Beautify",
              el: language != null ? language.name : void 0
            });
            if (onSave) {
              _this.trackEvent({
                ec: version,
                ea: "Beautify:OnSave",
                el: language != null ? language.name : void 0
              });
            } else {
              _this.trackEvent({
                ec: version,
                ea: "Beautify:Manual",
                el: language != null ? language.name : void 0
              });
            }
            if (unsupportedGrammar) {
              if (atom.config.get("atom-beautify.general.muteUnsupportedLanguageErrors")) {
                return resolve(null);
              } else {
                fileExtension = _this.getExtension(filePath);
                repoBugsUrl = pkg.bugs.url;
                title = "Atom Beautify could not find a supported beautifier for this file";
                detail = "Atom Beautify could not determine a supported beautifier to handle this file with grammar \"" + grammar + "\" and extension \"" + fileExtension + "\". If you would like to request support for this file and its language, please create an issue for Atom Beautify at " + repoBugsUrl;
                if (typeof atom !== "undefined" && atom !== null) {
                  atom.notifications.addWarning(title, {
                    detail: detail,
                    dismissable: true
                  });
                }
                return resolve(null);
              }
            }
          });
        };
      })(this));
    };

    Beautifiers.prototype.findFileResults = {};

    Beautifiers.prototype.getUserHome = function() {
      return process.env.HOME || process.env.HOMEPATH || process.env.USERPROFILE;
    };

    Beautifiers.prototype.verifyExists = function(fullPath) {
      if (fs == null) {
        fs = require("fs");
      }
      if (fs.existsSync(fullPath)) {
        return fullPath;
      } else {
        return null;
      }
    };


    /*
      Searches for a file with a specified name starting with
      'dir' and going all the way up either until it finds the file
      or hits the root.
    
      @param {string} name filename to search for (e.g. .jshintrc)
      @param {string} dir directory to start search from (default:
      current working directory)
      @param {boolean} upwards should recurse upwards on failure? (default: true)
    
      @returns {string} normalized filename
     */

    Beautifiers.prototype.findFile = function(name, dir, upwards) {
      var filename, parent;
      if (upwards == null) {
        upwards = true;
      }
      if (path == null) {
        path = require("path");
      }
      dir = dir || process.cwd();
      filename = path.normalize(path.join(dir, name));
      if (this.findFileResults[filename] !== void 0) {
        return this.findFileResults[filename];
      }
      parent = path.resolve(dir, "../");
      if (this.verifyExists(filename)) {
        this.findFileResults[filename] = filename;
        return filename;
      }
      if (dir === parent) {
        this.findFileResults[filename] = null;
        return null;
      }
      if (upwards) {
        return findFile(name, parent);
      } else {
        return null;
      }
    };


    /*
      Tries to find a configuration file in either project directory
      or in the home directory. Configuration files are named
      '.jsbeautifyrc'.
    
      @param {string} config name of the configuration file
      @param {string} file path to the file to be linted
      @param {boolean} upwards should recurse upwards on failure? (default: true)
    
      @returns {string} a path to the config file
     */

    Beautifiers.prototype.findConfig = function(config, file, upwards) {
      var dir, envs, home, proj;
      if (upwards == null) {
        upwards = true;
      }
      if (path == null) {
        path = require("path");
      }
      dir = path.dirname(path.resolve(file));
      envs = this.getUserHome();
      home = path.normalize(path.join(envs, config));
      proj = this.findFile(config, dir, upwards);
      logger.verbose(dir, proj, home);
      if (proj) {
        return proj;
      }
      if (this.verifyExists(home)) {
        return home;
      }
      return null;
    };

    Beautifiers.prototype.getConfigOptionsFromSettings = function(langs) {
      var config, options;
      config = atom.config.get('atom-beautify');
      return options = _.pick(config, langs);
    };

    Beautifiers.prototype.getConfig = function(startPath, upwards) {
      var configPath, contents, detail, e, error, externalOptions, jsonError, title;
      if (upwards == null) {
        upwards = true;
      }
      startPath = (typeof startPath === "string" ? startPath : "");
      if (!startPath) {
        return {};
      }
      configPath = this.findConfig(".jsbeautifyrc", startPath, upwards);
      logger.verbose('configPath', configPath, startPath, upwards);
      externalOptions = void 0;
      if (configPath) {
        if (fs == null) {
          fs = require("fs");
        }
        try {
          contents = fs.readFileSync(configPath, {
            encoding: "utf8"
          });
        } catch (error1) {
          error = error1;
          contents = null;
        }
        if (!contents) {
          externalOptions = {};
        } else {
          try {
            if (strip == null) {
              strip = require("strip-json-comments");
            }
            externalOptions = JSON.parse(strip(contents));
          } catch (error1) {
            e = error1;
            jsonError = e.message;
            logger.debug("Failed parsing config as JSON: " + configPath);
            try {
              if (yaml == null) {
                yaml = require("yaml-front-matter");
              }
              externalOptions = yaml.safeLoad(contents);
            } catch (error1) {
              e = error1;
              title = "Atom Beautify failed to parse config as JSON or YAML";
              detail = "Parsing '.jsbeautifyrc' at " + configPath + "\nJSON: " + jsonError + "\nYAML: " + e.message;
              if (typeof atom !== "undefined" && atom !== null) {
                atom.notifications.addWarning(title, {
                  detail: detail,
                  dismissable: true
                });
              }
              logger.debug("Failed parsing config as YAML and JSON: " + configPath);
              externalOptions = {};
            }
          }
        }
      } else {
        externalOptions = {};
      }
      return externalOptions;
    };

    Beautifiers.prototype.getOptionsForPath = function(editedFilePath, editor) {
      var allOptions, configOptions, editorConfigOptions, editorOptions, homeOptions, isNested, isSelection, languageNamespaces, p, pc, pf, projectOptions, softTabs, tabLength, userHome;
      languageNamespaces = this.languages.namespaces;
      editorOptions = {};
      if (editor != null) {
        isSelection = !!editor.getSelectedText();
        softTabs = editor.softTabs;
        tabLength = editor.getTabLength();
        editorOptions = {
          indent_size: (softTabs ? tabLength : 1),
          indent_char: (softTabs ? " " : "\t"),
          indent_with_tabs: !softTabs
        };
      }
      configOptions = this.getConfigOptionsFromSettings(languageNamespaces);
      userHome = this.getUserHome();
      homeOptions = this.getConfig(path.join(userHome, "FAKEFILENAME"), false);
      if (editedFilePath != null) {
        if (editorconfig == null) {
          editorconfig = require('editorconfig');
        }
        editorConfigOptions = editorconfig.parse(editedFilePath).then(function(editorConfigOptions) {
          logger.verbose('editorConfigOptions', editorConfigOptions);
          if (editorConfigOptions.indent_style === 'space') {
            editorConfigOptions.indent_char = " ";
          } else if (editorConfigOptions.indent_style === 'tab') {
            editorConfigOptions.indent_char = "\t";
            editorConfigOptions.indent_with_tabs = true;
            if (editorConfigOptions.tab_width) {
              editorConfigOptions.indent_size = editorConfigOptions.tab_width;
            }
          }
          return {
            _default: editorConfigOptions
          };
        });
        projectOptions = [];
        p = path.dirname(editedFilePath);
        while (p !== path.resolve(p, "../")) {
          pf = path.join(p, "FAKEFILENAME");
          pc = this.getConfig(pf, false);
          isNested = this.isNestedOptions(pc);
          if (!isNested) {
            pc = {
              _default: pc
            };
          }
          projectOptions.push(pc);
          p = path.resolve(p, "../");
        }
      } else {
        editorConfigOptions = {};
        projectOptions = [];
      }
      allOptions = [
        {
          _default: editorOptions
        }, configOptions, {
          _default: homeOptions
        }, editorConfigOptions
      ];
      projectOptions.reverse();
      allOptions = allOptions.concat(projectOptions);
      return allOptions;
    };

    Beautifiers.prototype.isNestedOptions = function(currOptions) {
      var containsNested, key;
      containsNested = false;
      key = void 0;
      if (currOptions._default) {
        return true;
      }
      for (key in currOptions) {
        if (_.indexOf(this.languages.namespaces, key) >= 0 && typeof currOptions[key] === "object") {
          containsNested = true;
          break;
        }
      }
      return containsNested;
    };

    Beautifiers.prototype.getOptions = function(selections, allOptions) {
      var options, self;
      self = this;
      if (_ == null) {
        _ = require("lodash");
      }
      if (extend == null) {
        extend = require("extend");
      }
      logger.verbose('getOptions selections', selections, allOptions);
      options = _.reduce(allOptions, (function(_this) {
        return function(result, currOptions) {
          var collectedConfig, containsNested, i, len, selection;
          collectedConfig = currOptions._default || {};
          containsNested = _this.isNestedOptions(currOptions);
          logger.verbose(containsNested, currOptions);
          if (!containsNested) {
            currOptions = {
              _default: currOptions
            };
          }
          for (i = 0, len = selections.length; i < len; i++) {
            selection = selections[i];
            logger.verbose('options', selection, currOptions[selection]);
            _.merge(collectedConfig, currOptions[selection]);
            logger.verbose('options', selection, collectedConfig);
          }
          return extend(result, collectedConfig);
        };
      })(this), {});
      return options;
    };

    return Beautifiers;

  })(EventEmitter);

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiL2hvbWUvbW93ZW5zLy5hdG9tL3BhY2thZ2VzL2F0b20tYmVhdXRpZnkvc3JjL2JlYXV0aWZpZXJzL2luZGV4LmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUFBLE1BQUEsMkpBQUE7SUFBQTs7Ozs7RUFBQSxDQUFBLEdBQUksT0FBQSxDQUFRLFFBQVI7O0VBQ0osS0FBQSxHQUFRLE9BQUEsQ0FBUSxpQkFBUjs7RUFDUixPQUFBLEdBQVUsT0FBQSxDQUFRLFVBQVI7O0VBQ1YsU0FBQSxHQUFZLE9BQUEsQ0FBUSxlQUFSOztFQUNaLElBQUEsR0FBTyxPQUFBLENBQVEsTUFBUjs7RUFDUCxNQUFBLEdBQVMsT0FBQSxDQUFRLFdBQVIsQ0FBQSxDQUFxQixVQUFyQjs7RUFDUixlQUFnQixPQUFBLENBQVEsUUFBUjs7RUFHakIsTUFBQSxHQUFTOztFQUNULEVBQUEsR0FBSzs7RUFDTCxFQUFBLEdBQUs7O0VBQ0wsS0FBQSxHQUFROztFQUNSLElBQUEsR0FBTzs7RUFDUCxZQUFBLEdBQWU7O0VBR2Qsa0JBQW1CLE9BQUEsQ0FBUSxVQUFSOztFQUNwQixlQUFBLENBQWdCLFNBQUE7V0FDZCxFQUFBLEdBQUssT0FBQSxDQUFRLHFCQUFSO0VBRFMsQ0FBaEI7O0VBRUEsR0FBQSxHQUFNLE9BQUEsQ0FBUSxvQkFBUjs7RUFDTixPQUFBLEdBQVUsR0FBRyxDQUFDOztFQUdkLFVBQUEsR0FBYTs7O0FBRWI7Ozs7RUFHQSxNQUFNLENBQUMsT0FBUCxHQUF1Qjs7OztBQUNyQjs7Ozs7OzBCQUtBLGVBQUEsR0FBa0IsQ0FDaEIsWUFEZ0IsRUFFaEIsWUFGZ0IsRUFHaEIsVUFIZ0IsRUFJaEIsa0JBSmdCLEVBS2hCLFlBTGdCLEVBTWhCLFFBTmdCLEVBT2hCLGNBUGdCLEVBUWhCLFNBUmdCLEVBU2hCLE1BVGdCLEVBVWhCLFlBVmdCLEVBV2hCLFdBWGdCLEVBWWhCLGdCQVpnQixFQWFoQixTQWJnQixFQWNo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LENBQU8sTUFBUCxFQUFlLGVBQWY7UUFyQjZCO01BQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUFyQixFQXNCUixFQXRCUTthQStCVjtJQXhDVzs7OztLQTFuQjRCO0FBN0IzQyIsInNvdXJjZXNDb250ZW50IjpbIl8gPSByZXF1aXJlKCdsb2Rhc2gnKVxuX3BsdXMgPSByZXF1aXJlKCd1bmRlcnNjb3JlLXBsdXMnKVxuUHJvbWlzZSA9IHJlcXVpcmUoJ2JsdWViaXJkJylcbkxhbmd1YWdlcyA9IHJlcXVpcmUoJy4uL2xhbmd1YWdlcy8nKVxucGF0aCA9IHJlcXVpcmUoJ3BhdGgnKVxubG9nZ2VyID0gcmVxdWlyZSgnLi4vbG9nZ2VyJykoX19maWxlbmFtZSlcbntFdmVudEVtaXR0ZXJ9ID0gcmVxdWlyZSAnZXZlbnRzJ1xuXG4jIExhenkgbG9hZGVkIGRlcGVuZGVuY2llc1xuZXh0ZW5kID0gbnVsbFxudWEgPSBudWxsXG5mcyA9IG51bGxcbnN0cmlwID0gbnVsbFxueWFtbCA9IG51bGxcbmVkaXRvcmNvbmZpZyA9IG51bGxcblxuIyBNaXNjXG57YWxsb3dVbnNhZmVFdmFsfSA9IHJlcXVpcmUgJ2xvb3Bob2xlJ1xuYWxsb3dVbnNhZmVFdmFsIC0+XG4gIHVhID0gcmVxdWlyZShcInVuaXZlcnNhbC1hbmFseXRpY3NcIilcbnBrZyA9IHJlcXVpcmUoXCIuLi8uLi9wYWNrYWdlLmpzb25cIilcbnZlcnNpb24gPSBwa2cudmVyc2lvblxuXG4jIEFuYWx5dGljc1xudHJhY2tpbmdJZCA9IFwiVUEtNTI3Mjk3MzEtMlwiXG5cbiMjI1xuUmVnaXN0ZXIgYWxsIHN1cHBvcnRlZCBiZWF1dGlmaWVyc1xuIyMjXG5tb2R1bGUuZXhwb3J0cyA9IGNsYXNzIEJlYXV0aWZpZXJzIGV4dGVuZHMgRXZlbnRFbWl0dGVyXG4gICMjI1xuICAgIExpc3Qgb2YgYmVhdXRpZmllciBuYW1lc1xuXG4gICAgVG8gcmVnaXN0ZXIgYSBiZWF1dGlmaWVyIGFkZCBpdHMgbmFtZSBoZXJlXG4gICMjI1xuICBiZWF1dGlmaWVyTmFtZXMgOiBbXG4gICAgJ3VuY3J1c3RpZnknXG4gICAgJ2FsaWduLXlhbWwnXG4gICAgJ2F1dG9wZXA4J1xuICAgICdjb2ZmZWUtZm9ybWF0dGVyJ1xuICAgICdjb2ZmZWUtZm10J1xuICAgICdjbGpmbXQnXG4gICAgJ2NsYW5nLWZvcm1hdCdcbiAgICAnY3J5c3RhbCdcbiAgICAnZGZtdCdcbiAgICAnZWxtLWZvcm1hdCdcbiAgICAnaGhfZm9ybWF0J1xuICAgICdodG1sYmVhdXRpZmllcidcbiAgICAnY3NzY29tYidcbiAgICAnZ2hlcmtpbidcbiAgICAnZ29mbXQnXG4gICAgJ2xhdGV4LWJlYXV0aWZ5J1xuICAgICdmb3J0cmFuLWJlYXV0aWZpZXInXG4gICAgJ2pzLWJlYXV0aWZ5J1xuICAgICdqc2NzJ1xuICAgICdlc2xpbnQnXG4gICAgJ2x1YS1iZWF1dGlmaWVyJ1xuICAgICduZ2lueC1iZWF1dGlmeSdcbiAgICAnb2NwLWluZGVudCdcbiAgICAncGVybHRpZHknXG4gICAgJ3BocC1jcy1maXhlcidcbiAgICAncGhwY2JmJ1xuICAgICdwcmV0dHlkaWZmJ1xuICAgICdweWJlYXV0aWZpZXInXG4gICAgJ3B1Zy1iZWF1dGlmeSdcbiAgICAncHVwcGV0LWZpeCdcbiAgICAncmVtYXJrJ1xuICAgICdydWJvY29wJ1xuICAgICdydWJ5LWJlYXV0aWZ5J1xuICAgICdydXN0Zm10J1xuICAgICdzYXNzLWNvbnZlcnQnXG4gICAgJ3NxbGZvcm1hdCdcbiAgICAnc3R5bGlzaC1oYXNrZWxsJ1xuICAgICd0aWR5LW1hcmtkb3duJ1xuICAgICd0eXBlc2NyaXB0LWZvcm1hdHRlcidcbiAgICAndnVlLWJlYXV0aWZpZXInXG4gICAgJ3lhcGYnXG4gICAgJ2VybF90aWR5J1xuICAgICdtYXJrby1iZWF1dGlmaWVyJ1xuICAgICdmb3JtYXRSJ1xuICAgICdiZWF1dHlzaCdcbiAgXVxuXG4gICMjI1xuICAgIExpc3Qgb2YgbG9hZGVkIGJlYXV0aWZpZXJzXG5cbiAgICBBdXRvZ2VuZXJhdGVkIGluIGBjb25zdHJ1Y3RvcmAgZnJvbSBgYmVhdXRpZmllck5hbWVzYFxuICAjIyNcbiAgYmVhdXRpZmllcnMgOiBudWxsXG5cbiAgIyMjXG4gICAgQWxsIGJlYXV0aWZpZXIgb3B0aW9uc1xuXG4gICAgQXV0b2dlbmVyYXRlZCBpbiBgY29uc3RydWN0b3JgXG4gICMjI1xuICBvcHRpb25zIDogbnVsbFxuXG4gICMjI1xuICAgIExhbmd1YWdlc1xuICAjIyNcbiAgbGFuZ3VhZ2VzIDogbmV3IExhbmd1YWdlcygpXG5cbiAgIyMjXG4gICAgQ29uc3RydWN0b3JcbiAgIyMjXG4gIGNvbnN0cnVjdG9yIDogLT5cblxuICAgICMgTG9hZCBiZWF1dGlmaWVyc1xuICAgIEBiZWF1dGlmaWVycyA9IF8ubWFwKCBAYmVhdXRpZmllck5hbWVzLCAobmFtZSkgLT5cbiAgICAgIEJlYXV0aWZpZXIgPSByZXF1aXJlKFwiLi8je25hbWV9XCIpXG4gICAgICBuZXcgQmVhdXRpZmllcigpXG4gICAgKVxuXG4gICAgQG9wdGlvbnMgPSBAbG9hZE9wdGlvbnMoKVxuXG4gIGxvYWRPcHRpb25zIDogLT5cbiAgICB0cnlcbiAgICAgIG9wdGlvbnMgPSByZXF1aXJlKCcuLi9vcHRpb25zLmpzb24nKVxuICAgICAgb3B0aW9ucyA9IF8ubWFwVmFsdWVzKG9wdGlvbnMsIChsYW5nKSAtPlxuICAgICAgICBzY29wZSA9IGxhbmcuc2NvcGVcbiAgICAgICAgdGFiTGVuZ3RoID0gYXRvbT8uY29uZmlnLmdldCgnZWRpdG9yLnRhYkxlbmd0aCcsIHNjb3BlOiBzY29wZSkgPyA0XG4gICAgICAgIHNvZnRUYWJzID0gYXRvbT8uY29uZmlnLmdldCgnZWRpdG9yLnNvZnRUYWJzJywgc2NvcGU6IHNjb3BlKSA/IHRydWVcbiAgICAgICAgZGVmYXVsdEluZGVudFNpemUgPSAoaWYgc29mdFRhYnMgdGhlbiB0YWJMZW5ndGggZWxzZSAxKVxuICAgICAgICBkZWZhdWx0SW5kZW50Q2hhciA9IChpZiBzb2Z0VGFicyB0aGVuIFwiIFwiIGVsc2UgXCJcXHRcIilcbiAgICAgICAgZGVmYXVsdEluZGVudFdpdGhUYWJzID0gbm90IHNvZnRUYWJzXG4gICAgICAgIGlmIF8uaGFzKGxhbmcsIFwicHJvcGVydGllcy5pbmRlbnRfc2l6ZVwiKVxuICAgICAgICAgIF8uc2V0KGxhbmcsIFwicHJvcGVydGllcy5pbmRlbnRfc2l6ZS5kZWZhdWx0XCIsIGRlZmF1bHRJbmRlbnRTaXplKVxuICAgICAgICBpZiBfLmhhcyhsYW5nLCBcInByb3BlcnRpZXMuaW5kZW50X2NoYXJcIilcbiAgICAgICAgICBfLnNldChsYW5nLCBcInByb3BlcnRpZXMuaW5kZW50X2NoYXIuZGVmYXVsdFwiLCBkZWZhdWx0SW5kZW50Q2hhcilcbiAgICAgICAgaWYgXy5oYXMobGFuZywgXCJwcm9wZXJ0aWVzLmluZGVudF93aXRoX3RhYnNcIilcbiAgICAgICAgICBfLnNldChsYW5nLCBcInByb3BlcnRpZXMuaW5kZW50X3dpdGhfdGFicy5kZWZhdWx0XCIsIGRlZmF1bHRJbmRlbnRXaXRoVGFicylcbiAgICAgICAgaWYgXy5oYXMobGFuZywgXCJwcm9wZXJ0aWVzLndyYXBfYXR0cmlidXRlc19pbmRlbnRfc2l6ZVwiKVxuICAgICAgICAgIF8uc2V0KGxhbmcsIFwicHJvcGVydGllcy53cmFwX2F0dHJpYnV0ZXNfaW5kZW50X3NpemUuZGVmYXVsdFwiLCBkZWZhdWx0SW5kZW50U2l6ZSlcbiAgICAgICAgcmV0dXJuIGxhbmdcbiAgICAgIClcbiAgICBjYXRjaCBlcnJvclxuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGxvYWRpbmcgb3B0aW9uc1wiLCBlcnJvcilcbiAgICAgIG9wdGlvbnMgPSB7fVxuICAgIHJldHVybiBvcHRpb25zXG5cbiAgIyMjXG4gICAgRnJvbSBodHRwczovL2dpdGh1Yi5jb20vYXRvbS9ub3RpZmljYXRpb25zL2Jsb2IvMDE3NzlhZGU3OWU3MTk2ZjE2MDNiOGMxZmEzMTcxNmFhNGEzMzkxMS9saWIvbm90aWZpY2F0aW9uLWlzc3VlLmNvZmZlZSNMMTMwXG4gICMjI1xuICBlbmNvZGVVUkkgOiAoc3RyKSAtPlxuICAgIHN0ciA9IGVuY29kZVVSSShzdHIpXG4gICAgc3RyLnJlcGxhY2UoLyMvZywgJyUyMycpLnJlcGxhY2UoLzsvZywgJyUzQicpXG5cblxuICBnZXRCZWF1dGlmaWVycyA6IChsYW5ndWFnZSkgLT5cblxuICAgICMgbG9nZ2VyLnZlcmJvc2UoQGJlYXV0aWZpZXJzKVxuICAgIF8uZmlsdGVyKCBAYmVhdXRpZmllcnMsIChiZWF1dGlmaWVyKSAtPlxuXG4gICAgICAjIGxvZ2dlci52ZXJib3NlKCdiZWF1dGlmaWVyJyxiZWF1dGlmaWVyLCBsYW5ndWFnZSlcbiAgICAgIF8uaW5jbHVkZXMoYmVhdXRpZmllci5sYW5ndWFnZXMsIGxhbmd1YWdlKVxuICAgIClcblxuICBnZXRCZWF1dGlmaWVyRm9yTGFuZ3VhZ2UgOiAobGFuZ3VhZ2UpIC0+XG4gICAgYmVhdXRpZmllcnMgPSBAZ2V0QmVhdXRpZmllcnMobGFuZ3VhZ2UubmFtZSlcbiAgICBsb2dnZXIudmVyYm9zZSgnYmVhdXRpZmllcnMnLCBfLm1hcChiZWF1dGlmaWVycywgJ25hbWUnKSlcbiAgICAjIFNlbGVjdCBiZWF1dGlmaWVyIGZyb20gbGFuZ3VhZ2UgY29uZmlnIHByZWZlcmVuY2VzXG4gICAgcHJlZmVycmVkQmVhdXRpZmllck5hbWUgPSBhdG9tLmNvbmZpZy5nZXQoXCJhdG9tLWJlYXV0aWZ5LiN7bGFuZ3VhZ2UubmFtZXNwYWNlfS5kZWZhdWx0X2JlYXV0aWZpZXJcIilcbiAgICBiZWF1dGlmaWVyID0gXy5maW5kKGJlYXV0aWZpZXJzLCAoYmVhdXRpZmllcikgLT5cbiAgICAgIGJlYXV0aWZpZXIubmFtZSBpcyBwcmVmZXJyZWRCZWF1dGlmaWVyTmFtZVxuICAgICkgb3IgYmVhdXRpZmllcnNbMF1cbiAgICByZXR1cm4gYmVhdXRpZmllclxuXG4gIGdldEV4dGVuc2lvbiA6IChmaWxlUGF0aCkgLT5cbiAgICBpZiBmaWxlUGF0aFxuICAgICAgcmV0dXJuIHBhdGguZXh0bmFtZShmaWxlUGF0aCkuc3Vic3RyKDEpXG5cbiAgZ2V0TGFuZ3VhZ2VzIDogKGdyYW1tYXIsIGZpbGVQYXRoKSAtPlxuICAgICMgR2V0IGxhbmd1YWdlXG4gICAgZmlsZUV4dGVuc2lvbiA9IEBnZXRFeHRlbnNpb24oZmlsZVBhdGgpXG5cbiAgICBpZiBmaWxlRXh0ZW5zaW9uXG4gICAgICBsYW5ndWFnZXMgPSBAbGFuZ3VhZ2VzLmdldExhbmd1YWdlcyh7Z3JhbW1hciwgZXh0ZW5zaW9uOiBmaWxlRXh0ZW5zaW9ufSlcbiAgICBlbHNlXG4gICAgICBsYW5ndWFnZXMgPSBAbGFuZ3VhZ2VzLmdldExhbmd1YWdlcyh7Z3JhbW1hcn0pXG5cbiAgICBsb2dnZXIudmVyYm9zZShsYW5ndWFnZXMsIGdyYW1tYXIsIGZpbGVFeHRlbnNpb24pXG5cbiAgICByZXR1cm4gbGFuZ3VhZ2VzXG5cbiAgZ2V0TGFuZ3VhZ2UgOiAoZ3JhbW1hciwgZmlsZVBhdGgpIC0+XG4gICAgbGFuZ3VhZ2VzID0gQGdldExhbmd1YWdlcyhncmFtbWFyLCBmaWxlUGF0aClcblxuICAgICMgQ2hlY2sgaWYgdW5zdXBwb3J0ZWQgbGFuZ3VhZ2VcbiAgICBpZiBsYW5ndWFnZXMubGVuZ3RoID4gMFxuICAgICAgbGFuZ3VhZ2UgPSBsYW5ndWFnZXNbMF1cblxuICAgIHJldHVybiBsYW5ndWFnZVxuXG4gIGdldE9wdGlvbnNGb3JMYW5ndWFnZSA6IChhbGxPcHRpb25zLCBsYW5ndWFnZSkgLT5cbiAgICAjIE9wdGlvbnMgZm9yIExhbmd1YWdlXG4gICAgc2VsZWN0aW9ucyA9IChsYW5ndWFnZS5mYWxsYmFjayBvciBbXSkuY29uY2F0KFtsYW5ndWFnZS5uYW1lc3BhY2VdKVxuICAgIG9wdGlvbnMgPSBAZ2V0T3B0aW9ucyhzZWxlY3Rpb25zLCBhbGxPcHRpb25zKSBvciB7fVxuXG4gIHRyYW5zZm9ybU9wdGlvbnMgOiAoYmVhdXRpZmllciwgbGFuZ3VhZ2VOYW1lLCBvcHRpb25zKSAtPlxuXG4gICAgIyBUcmFuc2Zvcm0gb3B0aW9ucywgaWYgYXBwbGljYWJsZVxuICAgIGJlYXV0aWZpZXJPcHRpb25zID0gYmVhdXRpZmllci5vcHRpb25zW2xhbmd1YWdlTmFtZV1cbiAgICBpZiB0eXBlb2YgYmVhdXRpZmllck9wdGlvbnMgaXMgXCJib29sZWFuXCJcblxuICAgICAgIyBMYW5ndWFnZSBpcyBzdXBwb3J0ZWQgYnkgYmVhdXRpZmllclxuICAgICAgIyBJZiB0cnVlIHRoZW4gYWxsIG9wdGlvbnMgYXJlIGRpcmVjdGx5IHN1cHBvcnRlZFxuICAgICAgIyBJZiBmYWxzeSB0aGVuIHBhc3MgYWxsIG9wdGlvbnMgdG8gYmVhdXRpZmllcixcbiAgICAgICMgYWx0aG91Z2ggbm8gb3B0aW9ucyBhcmUgZGlyZWN0bHkgc3VwcG9ydGVkLlxuICAgICAgcmV0dXJuIG9wdGlvbnNcbiAgICBlbHNlIGlmIHR5cGVvZiBiZWF1dGlmaWVyT3B0aW9ucyBpcyBcIm9iamVjdFwiXG5cbiAgICAgICMgVHJhbnNmb3JtIHRoZSBvcHRpb25zXG4gICAgICB0cmFuc2Zvcm1lZE9wdGlvbnMgPSB7fVxuXG5cbiAgICAgICMgVHJhbnNmb3JtIGZvciBmaWVsZHNcbiAgICAgIGZvciBmaWVsZCwgb3Agb2YgYmVhdXRpZmllck9wdGlvbnNcbiAgICAgICAgaWYgdHlwZW9mIG9wIGlzIFwic3RyaW5nXCJcblxuICAgICAgICAgICMgUmVuYW1lXG4gICAgICAgICAgdHJhbnNmb3JtZWRPcHRpb25zW2ZpZWxkXSA9IG9wdGlvbnNbb3BdXG4gICAgICAgIGVsc2UgaWYgdHlwZW9mIG9wIGlzIFwiZnVuY3Rpb25cIlxuXG4gICAgICAgICAgIyBUcmFuc2Zvcm1cbiAgICAgICAgICB0cmFuc2Zvcm1lZE9wdGlvbnNbZmllbGRdID0gb3Aob3B0aW9uc1tmaWVsZF0pXG4gICAgICAgIGVsc2UgaWYgdHlwZW9mIG9wIGlzIFwiYm9vbGVhblwiXG5cbiAgICAgICAgICAjIEVuYWJsZS9EaXNhYmxlXG4gICAgICAgICAgaWYgb3AgaXMgdHJ1ZVxuICAgICAgICAgICAgdHJhbnNmb3JtZWRPcHRpb25zW2ZpZWxkXSA9IG9wdGlvbnNbZmllbGRdXG4gICAgICAgIGVsc2UgaWYgXy5pc0FycmF5KG9wKVxuXG4gICAgICAgICAgIyBDb21wbGV4IGZ1bmN0aW9uXG4gICAgICAgICAgW2ZpZWxkcy4uLiwgZm5dID0gb3BcbiAgICAgICAgICB2YWxzID0gXy5tYXAoZmllbGRzLCAoZikgLT5cbiAgICAgICAgICAgIHJldHVybiBvcHRpb25zW2ZdXG4gICAgICAgICAgKVxuXG4gICAgICAgICAgIyBBcHBseSBmdW5jdGlvblxuICAgICAgICAgIHRyYW5zZm9ybWVkT3B0aW9uc1tmaWVsZF0gPSBmbi5hcHBseSggbnVsbCAsIHZhbHMpXG5cbiAgICAgICMgUmVwbGFjZSBvbGQgb3B0aW9ucyB3aXRoIG5ldyB0cmFuc2Zvcm1lZCBvcHRpb25zXG4gICAgICByZXR1cm4gdHJhbnNmb3JtZWRPcHRpb25zXG4gICAgZWxzZVxuICAgICAgbG9nZ2VyLndhcm4oXCJVbnN1cHBvcnRlZCBMYW5ndWFnZSBvcHRpb25zOiBcIiwgYmVhdXRpZmllck9wdGlvbnMpXG4gICAgICByZXR1cm4gb3B0aW9uc1xuXG4gIHRyYWNrRXZlbnQgOiAocGF5bG9hZCkgLT5cbiAgICBAdHJhY2soXCJldmVudFwiLCBwYXlsb2FkKVxuXG4gIHRyYWNrVGltaW5nIDogKHBheWxvYWQpIC0+XG4gICAgQHRyYWNrKFwidGltaW5nXCIsIHBheWxvYWQpXG5cbiAgdHJhY2sgOiAodHlwZSwgcGF5bG9hZCkgLT5cbiAgICB0cnlcbiAgICAgICMgQ2hlY2sgaWYgQW5hbHl0aWNzIGlzIGVuYWJsZWRcbiAgICAgIGlmIGF0b20uY29uZmlnLmdldChcImNvcmUudGVsZW1ldHJ5Q29uc2VudFwiKSBpcyBcImxpbWl0ZWRcIlxuICAgICAgICBsb2dnZXIuaW5mbyhcIkFuYWx5dGljcyBpcyBlbmFibGVkLlwiKVxuICAgICAgICAjIFNldHVwIEFuYWx5dGljc1xuICAgICAgICB1bmxlc3MgYXRvbS5jb25maWcuZ2V0KFwiYXRvbS1iZWF1dGlmeS5nZW5lcmFsLl9hbmFseXRpY3NVc2VySWRcIilcbiAgICAgICAgICB1dWlkID0gcmVxdWlyZShcIm5vZGUtdXVpZFwiKVxuICAgICAgICAgIGF0b20uY29uZmlnLnNldCBcImF0b20tYmVhdXRpZnkuZ2VuZXJhbC5fYW5hbHl0aWNzVXNlcklkXCIsIHV1aWQudjQoKVxuICAgICAgICAjIFNldHVwIEFuYWx5dGljcyBVc2VyIElkXG4gICAgICAgIHVzZXJJZCA9IGF0b20uY29uZmlnLmdldChcImF0b20tYmVhdXRpZnkuZ2VuZXJhbC5fYW5hbHl0aWNzVXNlcklkXCIpXG4gICAgICAgIEBhbmFseXRpY3MgPz0gbmV3IHVhKHRyYWNraW5nSWQsIHVzZXJJZCwge1xuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIFwiVXNlci1BZ2VudFwiOiBuYXZpZ2F0b3IudXNlckFnZW50XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICBAYW5hbHl0aWNzW3R5cGVdKHBheWxvYWQpLnNlbmQoKVxuICAgICAgZWxzZVxuICAgICAgICBsb2dnZXIuaW5mbyhcIkFuYWx5dGljcyBpcyBkaXNhYmxlZC5cIilcbiAgICBjYXRjaCBlcnJvclxuICAgICAgbG9nZ2VyLmVycm9yKGVycm9yKVxuXG5cbiAgYmVhdXRpZnkgOiAodGV4dCwgYWxsT3B0aW9ucywgZ3JhbW1hciwgZmlsZVBhdGgsIHtvblNhdmV9ID0ge30pIC0+XG4gICAgcmV0dXJuIFByb21pc2UuYWxsKGFsbE9wdGlvbnMpXG4gICAgLnRoZW4oKGFsbE9wdGlvbnMpID0+XG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT5cbiAgICAgICAgbG9nZ2VyLmluZm8oJ2JlYXV0aWZ5JywgdGV4dCwgYWxsT3B0aW9ucywgZ3JhbW1hciwgZmlsZVBhdGgsIG9uU2F2ZSlcbiAgICAgICAgbG9nZ2VyLnZlcmJvc2UoYWxsT3B0aW9ucylcblxuICAgICAgICBsYW5ndWFnZSA9IEBnZXRMYW5ndWFnZShncmFtbWFyLCBmaWxlUGF0aClcblxuICAgICAgICAjIENoZWNrIGlmIHVuc3VwcG9ydGVkIGxhbmd1YWdlXG4gICAgICAgIGlmICFsYW5ndWFnZVxuICAgICAgICAgIHVuc3VwcG9ydGVkR3JhbW1hciA9IHRydWVcblxuICAgICAgICAgIGxvZ2dlci52ZXJib3NlKCdVbnN1cHBvcnRlZCBsYW5ndWFnZScpXG5cbiAgICAgICAgICAjIENoZWNrIGlmIG9uIHNhdmVcbiAgICAgICAgICBpZiBvblNhdmVcbiAgICAgICAgICAgICMgSWdub3JlIHRoaXMsIGFzIGl0IHdhcyBqdXN0IGEgZ2VuZXJhbCBmaWxlIHNhdmUsIGFuZFxuICAgICAgICAgICAgIyBub3QgaW50ZW5kZWQgdG8gYmUgYmVhdXRpZmllZFxuICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoIG51bGwgKVxuICAgICAgICBlbHNlXG4gICAgICAgICAgbG9nZ2VyLnZlcmJvc2UoXCJMYW5ndWFnZSAje2xhbmd1YWdlLm5hbWV9IHN1cHBvcnRlZFwiKVxuXG4gICAgICAgICAgIyBHZXQgbGFuZ3VhZ2UgY29uZmlnXG4gICAgICAgICAgbGFuZ0Rpc2FibGVkID0gYXRvbS5jb25maWcuZ2V0KFwiYXRvbS1iZWF1dGlmeS4je2xhbmd1YWdlLm5hbWVzcGFjZX0uZGlzYWJsZWRcIilcblxuICAgICAgICAgICMgQmVhdXRpZnkhXG4gICAgICAgICAgdW5zdXBwb3J0ZWRHcmFtbWFyID0gZmFsc2VcblxuICAgICAgICAgICMgQ2hlY2sgaWYgTGFuZ3VhZ2UgaXMgZGlzYWJsZWRcbiAgICAgICAgICBpZiBsYW5nRGlzYWJsZWRcbiAgICAgICAgICAgIGxvZ2dlci52ZXJib3NlKFwiTGFuZ3VhZ2UgI3tsYW5ndWFnZS5uYW1lfSBpcyBkaXNhYmxlZFwiKVxuICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoIG51bGwgKVxuXG4gICAgICAgICAgIyBHZXQgbW9yZSBsYW5ndWFnZSBjb25maWdcbiAgICAgICAgICBiZWF1dGlmeU9uU2F2ZSA9IGF0b20uY29uZmlnLmdldChcImF0b20tYmVhdXRpZnkuI3tsYW5ndWFnZS5uYW1lc3BhY2V9LmJlYXV0aWZ5X29uX3NhdmVcIilcblxuICAgICAgICAgICMgVmVyaWZ5IGlmIGJlYXV0aWZ5aW5nIG9uIHNhdmVcbiAgICAgICAgICBpZiBvblNhdmUgYW5kIG5vdCBiZWF1dGlmeU9uU2F2ZVxuICAgICAgICAgICAgbG9nZ2VyLnZlcmJvc2UoXCJCZWF1dGlmeSBvbiBzYXZlIGlzIGRpc2FibGVkIGZvciBsYW5ndWFnZSAje2xhbmd1YWdlLm5hbWV9XCIpXG4gICAgICAgICAgICAjIFNhdmluZywgYW5kIGJlYXV0aWZ5IG9uIHNhdmUgaXMgZGlzYWJsZWRcbiAgICAgICAgICAgIHJldHVybiByZXNvbHZlKCBudWxsIClcblxuICAgICAgICAgICMgT3B0aW9ucyBmb3IgTGFuZ3VhZ2VcbiAgICAgICAgICBvcHRpb25zID0gQGdldE9wdGlvbnNGb3JMYW5ndWFnZShhbGxPcHRpb25zLCBsYW5ndWFnZSlcblxuICAgICAgICAgICMgR2V0IEJlYXV0aWZpZXJcbiAgICAgICAgICBsb2dnZXIudmVyYm9zZShncmFtbWFyLCBsYW5ndWFnZSlcblxuICAgICAgICAgIGxvZ2dlci52ZXJib3NlKFwibGFuZ3VhZ2Ugb3B0aW9uczogI3tKU09OLnN0cmluZ2lmeShvcHRpb25zLCBudWxsLCA0KX1cIilcblxuICAgICAgICAgIGxvZ2dlci52ZXJib3NlKGxhbmd1YWdlLm5hbWUsIGZpbGVQYXRoLCBvcHRpb25zLCBhbGxPcHRpb25zKVxuXG4gICAgICAgICAgIyBDaGVjayBpZiB1bnN1cHBvcnRlZCBsYW5ndWFnZVxuICAgICAgICAgIGJlYXV0aWZpZXIgPSBAZ2V0QmVhdXRpZmllckZvckxhbmd1YWdlKGxhbmd1YWdlKVxuICAgICAgICAgIGlmIG5vdCBiZWF1dGlmaWVyP1xuICAgICAgICAgICAgdW5zdXBwb3J0ZWRHcmFtbWFyID0gdHJ1ZVxuICAgICAgICAgICAgbG9nZ2VyLnZlcmJvc2UoJ0JlYXV0aWZpZXIgZm9yIGxhbmd1YWdlIG5vdCBmb3VuZCcpXG4gICAgICAgICAgZWxzZVxuICAgICAgICAgICAgbG9nZ2VyLnZlcmJvc2UoJ2JlYXV0aWZpZXInLCBiZWF1dGlmaWVyLm5hbWUpXG5cbiAgICAgICAgICAgICMgQXBwbHkgbGFuZ3VhZ2Utc3BlY2lmaWMgb3B0aW9uIHRyYW5zZm9ybWF0aW9uc1xuICAgICAgICAgICAgb3B0aW9ucyA9IEB0cmFuc2Zvcm1PcHRpb25zKGJlYXV0aWZpZXIsIGxhbmd1YWdlLm5hbWUsIG9wdGlvbnMpXG5cbiAgICAgICAgICAgICMgQmVhdXRpZnkgdGV4dCB3aXRoIGxhbmd1YWdlIG9wdGlvbnNcbiAgICAgICAgICAgIEBlbWl0IFwiYmVhdXRpZnk6OnN0YXJ0XCJcblxuICAgICAgICAgICAgY29udGV4dCA9XG4gICAgICAgICAgICAgIGZpbGVQYXRoOiBmaWxlUGF0aFxuXG4gICAgICAgICAgICBzdGFydFRpbWUgPSBuZXcgRGF0ZSgpXG4gICAgICAgICAgICBiZWF1dGlmaWVyLmJlYXV0aWZ5KHRleHQsIGxhbmd1YWdlLm5hbWUsIG9wdGlvbnMsIGNvbnRleHQpXG4gICAgICAgICAgICAudGhlbigocmVzdWx0KSA9PlxuICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdClcbiAgICAgICAgICAgICAgIyBUcmFjayBUaW1pbmdcbiAgICAgICAgICAgICAgQHRyYWNrVGltaW5nKHtcbiAgICAgICAgICAgICAgICB1dGM6IFwiQmVhdXRpZnlcIiAjIENhdGVnb3J5XG4gICAgICAgICAgICAgICAgdXR2OiBsYW5ndWFnZT8ubmFtZSAjIFZhcmlhYmxlXG4gICAgICAgICAgICAgICAgdXR0OiAobmV3IERhdGUoKSAtIHN0YXJ0VGltZSkgIyBWYWx1ZVxuICAgICAgICAgICAgICAgIHV0bDogdmVyc2lvbiAjIExhYmVsXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICMgVHJhY2sgRW1wdHkgYmVhdXRpZmljYXRpb24gcmVzdWx0c1xuICAgICAgICAgICAgICBpZiBub3QgcmVzdWx0XG4gICAgICAgICAgICAgICAgQHRyYWNrRXZlbnQoe1xuICAgICAgICAgICAgICAgICAgZWM6IHZlcnNpb24sICMgQ2F0ZWdvcnlcbiAgICAgICAgICAgICAgICAgIGVhOiBcIkJlYXV0aWZ5OkVtcHR5XCIgIyBBY3Rpb25cbiAgICAgICAgICAgICAgICAgIGVsOiBsYW5ndWFnZT8ubmFtZSAjIExhYmVsXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+XG4gICAgICAgICAgICAgIHJlamVjdChlcnJvcilcbiAgICAgICAgICAgICAgIyBUcmFjayBFcnJvcnNcbiAgICAgICAgICAgICAgQHRyYWNrRXZlbnQoe1xuICAgICAgICAgICAgICAgIGVjOiB2ZXJzaW9uLCAjIENhdGVnb3J5XG4gICAgICAgICAgICAgICAgZWE6IFwiQmVhdXRpZnk6RXJyb3JcIiAjIEFjdGlvblxuICAgICAgICAgICAgICAgIGVsOiBsYW5ndWFnZT8ubmFtZSAjIExhYmVsXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApXG4gICAgICAgICAgICAuZmluYWxseSg9PlxuICAgICAgICAgICAgICBAZW1pdCBcImJlYXV0aWZ5OjplbmRcIlxuICAgICAgICAgICAgKVxuXG4gICAgICAgICMgQ2hlY2sgaWYgQW5hbHl0aWNzIGlzIGVuYWJsZWRcbiAgICAgICAgQHRyYWNrRXZlbnQoe1xuICAgICAgICAgIGVjOiB2ZXJzaW9uLCAjIENhdGVnb3J5XG4gICAgICAgICAgZWE6IFwiQmVhdXRpZnlcIiAjIEFjdGlvblxuICAgICAgICAgIGVsOiBsYW5ndWFnZT8ubmFtZSAjIExhYmVsXG4gICAgICAgIH0pXG4gICAgICAgIGlmIG9uU2F2ZVxuICAgICAgICAgIEB0cmFja0V2ZW50KHtcbiAgICAgICAgICAgIGVjOiB2ZXJzaW9uLCAjIENhdGVnb3J5XG4gICAgICAgICAgICBlYTogXCJCZWF1dGlmeTpPblNhdmVcIiAjIEFjdGlvblxuICAgICAgICAgICAgZWw6IGxhbmd1YWdlPy5uYW1lICMgTGFiZWxcbiAgICAgICAgICB9KVxuICAgICAgICBlbHNlXG4gICAgICAgICAgQHRyYWNrRXZlbnQoe1xuICAgICAgICAgICAgZWM6IHZlcnNpb24sICMgQ2F0ZWdvcnlcbiAgICAgICAgICAgIGVhOiBcIkJlYXV0aWZ5Ok1hbnVhbFwiICMgQWN0aW9uXG4gICAgICAgICAgICBlbDogbGFuZ3VhZ2U/Lm5hbWUgIyBMYWJlbFxuICAgICAgICAgIH0pXG5cblxuICAgICAgICBpZiB1bnN1cHBvcnRlZEdyYW1tYXJcbiAgICAgICAgICBpZiBhdG9tLmNvbmZpZy5nZXQoXCJhdG9tLWJlYXV0aWZ5LmdlbmVyYWwubXV0ZVVuc3VwcG9ydGVkTGFuZ3VhZ2VFcnJvcnNcIilcbiAgICAgICAgICAgIHJldHVybiByZXNvbHZlKCBudWxsIClcbiAgICAgICAgICBlbHNlXG4gICAgICAgICAgICBmaWxlRXh0ZW5zaW9uID0gQGdldEV4dGVuc2lvbihmaWxlUGF0aClcbiAgICAgICAgICAgIHJlcG9CdWdzVXJsID0gcGtnLmJ1Z3MudXJsXG4gICAgICAgICAgICB0aXRsZSA9IFwiQXRvbSBCZWF1dGlmeSBjb3VsZCBub3QgZmluZCBhIHN1cHBvcnRlZCBiZWF1dGlmaWVyIGZvciB0aGlzIGZpbGVcIlxuICAgICAgICAgICAgZGV0YWlsID0gXCJcIlwiXG4gICAgICAgICAgICAgICAgICAgICBBdG9tIEJlYXV0aWZ5IGNvdWxkIG5vdCBkZXRlcm1pbmUgYSBzdXBwb3J0ZWQgYmVhdXRpZmllciB0byBoYW5kbGUgdGhpcyBmaWxlIHdpdGggZ3JhbW1hciBcXFwiI3tncmFtbWFyfVxcXCIgYW5kIGV4dGVuc2lvbiBcXFwiI3tmaWxlRXh0ZW5zaW9ufVxcXCIuIFxcXG4gICAgICAgICAgICAgICAgICAgICBJZiB5b3Ugd291bGQgbGlrZSB0byByZXF1ZXN0IHN1cHBvcnQgZm9yIHRoaXMgZmlsZSBhbmQgaXRzIGxhbmd1YWdlLCBwbGVhc2UgY3JlYXRlIGFuIGlzc3VlIGZvciBBdG9tIEJlYXV0aWZ5IGF0ICN7cmVwb0J1Z3NVcmx9XG4gICAgICAgICAgICAgICAgICAgICBcIlwiXCJcblxuICAgICAgICAgICAgYXRvbT8ubm90aWZpY2F0aW9ucy5hZGRXYXJuaW5nKHRpdGxlLCB7XG4gICAgICAgICAgICAgIGRldGFpbFxuICAgICAgICAgICAgICBkaXNtaXNzYWJsZSA6IHRydWVcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSggbnVsbCApXG4gICAgICAgICAgICApXG5cbiAgICAgIClcblxuICBmaW5kRmlsZVJlc3VsdHMgOiB7fVxuXG5cbiAgIyBDTElcbiAgZ2V0VXNlckhvbWUgOiAtPlxuICAgIHByb2Nlc3MuZW52LkhPTUUgb3IgcHJvY2Vzcy5lbnYuSE9NRVBBVEggb3IgcHJvY2Vzcy5lbnYuVVNFUlBST0ZJTEVcbiAgdmVyaWZ5RXhpc3RzIDogKGZ1bGxQYXRoKSAtPlxuICAgIGZzID89IHJlcXVpcmUoXCJmc1wiKVxuICAgICggaWYgZnMuZXhpc3RzU3luYyhmdWxsUGF0aCkgdGhlbiBmdWxsUGF0aCBlbHNlIG51bGwgKVxuXG5cblxuICAjIFN0b3JhZ2UgZm9yIG1lbW9pemVkIHJlc3VsdHMgZnJvbSBmaW5kIGZpbGVcbiAgIyBTaG91bGQgcHJldmVudCBsb3RzIG9mIGRpcmVjdG9yeSB0cmF2ZXJzYWwgJlxuICAjIGxvb2t1cHMgd2hlbiBsaW5pdGluZyBhbiBlbnRpcmUgcHJvamVjdFxuICAjIyNcbiAgICBTZWFyY2hlcyBmb3IgYSBmaWxlIHdpdGggYSBzcGVjaWZpZWQgbmFtZSBzdGFydGluZyB3aXRoXG4gICAgJ2RpcicgYW5kIGdvaW5nIGFsbCB0aGUgd2F5IHVwIGVpdGhlciB1bnRpbCBpdCBmaW5kcyB0aGUgZmlsZVxuICAgIG9yIGhpdHMgdGhlIHJvb3QuXG5cbiAgICBAcGFyYW0ge3N0cmluZ30gbmFtZSBmaWxlbmFtZSB0byBzZWFyY2ggZm9yIChlLmcuIC5qc2hpbnRyYylcbiAgICBAcGFyYW0ge3N0cmluZ30gZGlyIGRpcmVjdG9yeSB0byBzdGFydCBzZWFyY2ggZnJvbSAoZGVmYXVsdDpcbiAgICBjdXJyZW50IHdvcmtpbmcgZGlyZWN0b3J5KVxuICAgIEBwYXJhbSB7Ym9vbGVhbn0gdXB3YXJkcyBzaG91bGQgcmVjdXJzZSB1cHdhcmRzIG9uIGZhaWx1cmU/IChkZWZhdWx0OiB0cnVlKVxuXG4gICAgQHJldHVybnMge3N0cmluZ30gbm9ybWFsaXplZCBmaWxlbmFtZVxuICAjIyNcbiAgZmluZEZpbGUgOiAobmFtZSwgZGlyLCB1cHdhcmRzID0gdHJ1ZSkgLT5cbiAgICBwYXRoID89IHJlcXVpcmUoXCJwYXRoXCIpXG4gICAgZGlyID0gZGlyIG9yIHByb2Nlc3MuY3dkKClcbiAgICBmaWxlbmFtZSA9IHBhdGgubm9ybWFsaXplKHBhdGguam9pbihkaXIsIG5hbWUpKVxuICAgIHJldHVybiBAZmluZEZpbGVSZXN1bHRzW2ZpbGVuYW1lXSBpZiBAZmluZEZpbGVSZXN1bHRzW2ZpbGVuYW1lXSBpc250IHVuZGVmaW5lZFxuICAgIHBhcmVudCA9IHBhdGgucmVzb2x2ZShkaXIsIFwiLi4vXCIpXG4gICAgaWYgQHZlcmlmeUV4aXN0cyhmaWxlbmFtZSlcbiAgICAgIEBmaW5kRmlsZVJlc3VsdHNbZmlsZW5hbWVdID0gZmlsZW5hbWVcbiAgICAgIHJldHVybiBmaWxlbmFtZVxuICAgIGlmIGRpciBpcyBwYXJlbnRcbiAgICAgIEBmaW5kRmlsZVJlc3VsdHNbZmlsZW5hbWVdID0gbnVsbFxuICAgICAgcmV0dXJuIG51bGxcbiAgICBpZiB1cHdhcmRzXG4gICAgICBmaW5kRmlsZSBuYW1lLCBwYXJlbnRcbiAgICBlbHNlXG4gICAgICByZXR1cm4gbnVsbFxuXG5cbiAgIyMjXG4gICAgVHJpZXMgdG8gZmluZCBhIGNvbmZpZ3VyYXRpb24gZmlsZSBpbiBlaXRoZXIgcHJvamVjdCBkaXJlY3RvcnlcbiAgICBvciBpbiB0aGUgaG9tZSBkaXJlY3RvcnkuIENvbmZpZ3VyYXRpb24gZmlsZXMgYXJlIG5hbWVkXG4gICAgJy5qc2JlYXV0aWZ5cmMnLlxuXG4gICAgQHBhcmFtIHtzdHJpbmd9IGNvbmZpZyBuYW1lIG9mIHRoZSBjb25maWd1cmF0aW9uIGZpbGVcbiAgICBAcGFyYW0ge3N0cmluZ30gZmlsZSBwYXRoIHRvIHRoZSBmaWxlIHRvIGJlIGxpbnRlZFxuICAgIEBwYXJhbSB7Ym9vbGVhbn0gdXB3YXJkcyBzaG91bGQgcmVjdXJzZSB1cHdhcmRzIG9uIGZhaWx1cmU/IChkZWZhdWx0OiB0cnVlKVxuXG4gICAgQHJldHVybnMge3N0cmluZ30gYSBwYXRoIHRvIHRoZSBjb25maWcgZmlsZVxuICAjIyNcbiAgZmluZENvbmZpZyA6IChjb25maWcsIGZpbGUsIHVwd2FyZHMgPSB0cnVlKSAtPlxuICAgIHBhdGggPz0gcmVxdWlyZShcInBhdGhcIilcbiAgICBkaXIgPSBwYXRoLmRpcm5hbWUocGF0aC5yZXNvbHZlKGZpbGUpKVxuICAgIGVudnMgPSBAZ2V0VXNlckhvbWUoKVxuICAgIGhvbWUgPSBwYXRoLm5vcm1hbGl6ZShwYXRoLmpvaW4oZW52cywgY29uZmlnKSlcbiAgICBwcm9qID0gQGZpbmRGaWxlKGNvbmZpZywgZGlyLCB1cHdhcmRzKVxuICAgIGxvZ2dlci52ZXJib3NlKGRpciwgcHJvaiwgaG9tZSlcbiAgICByZXR1cm4gcHJvaiBpZiBwcm9qXG4gICAgcmV0dXJuIGhvbWUgaWYgQHZlcmlmeUV4aXN0cyhob21lKVxuICAgIG51bGxcbiAgZ2V0Q29uZmlnT3B0aW9uc0Zyb21TZXR0aW5ncyA6IChsYW5ncykgLT5cbiAgICBjb25maWcgPSBhdG9tLmNvbmZpZy5nZXQoJ2F0b20tYmVhdXRpZnknKVxuICAgIG9wdGlvbnMgPSBfLnBpY2soY29uZmlnLCBsYW5ncylcblxuICAjIExvb2sgZm9yIC5qc2JlYXV0aWZpZXJyYyBpbiBmaWxlIGFuZCBob21lIHBhdGgsIGNoZWNrIGVudiB2YXJpYWJsZXNcbiAgZ2V0Q29uZmlnIDogKHN0YXJ0UGF0aCwgdXB3YXJkcyA9IHRydWUpIC0+XG4gICAgIyBjb25zb2xlLmxvZygnZ2V0Q29uZmlnJywgc3RhcnRQYXRoLCB1cHdhcmRzKVxuICAgICMgVmVyaWZ5IHRoYXQgc3RhcnRQYXRoIGlzIGEgc3RyaW5nXG4gICAgc3RhcnRQYXRoID0gKCBpZiAoIHR5cGVvZiBzdGFydFBhdGggaXMgXCJzdHJpbmdcIikgdGhlbiBzdGFydFBhdGggZWxzZSBcIlwiKVxuICAgIHJldHVybiB7fSB1bmxlc3Mgc3RhcnRQYXRoXG5cblxuICAgICMgR2V0IHRoZSBwYXRoIHRvIHRoZSBjb25maWcgZmlsZVxuICAgIGNvbmZpZ1BhdGggPSBAZmluZENvbmZpZyhcIi5qc2JlYXV0aWZ5cmNcIiwgc3RhcnRQYXRoLCB1cHdhcmRzKVxuICAgIGxvZ2dlci52ZXJib3NlKCdjb25maWdQYXRoJywgY29uZmlnUGF0aCwgc3RhcnRQYXRoLCB1cHdhcmRzKVxuICAgIGV4dGVybmFsT3B0aW9ucyA9IHVuZGVmaW5lZFxuICAgIGlmIGNvbmZpZ1BhdGhcbiAgICAgIGZzID89IHJlcXVpcmUoXCJmc1wiKVxuICAgICAgdHJ5XG4gICAgICAgIGNvbnRlbnRzID0gZnMucmVhZEZpbGVTeW5jKGNvbmZpZ1BhdGgsXG4gICAgICAgICAgZW5jb2RpbmcgOiBcInV0ZjhcIlxuICAgICAgICApXG4gICAgICBjYXRjaCBlcnJvclxuICAgICAgICBjb250ZW50cyA9IG51bGwgI2ZpbGUgaXNudCBhdmFpbGFibGUgYW55bW9yZVxuICAgICAgdW5sZXNzIGNvbnRlbnRzXG4gICAgICAgIGV4dGVybmFsT3B0aW9ucyA9IHt9XG4gICAgICBlbHNlXG4gICAgICAgIHRyeVxuICAgICAgICAgIHN0cmlwID89IHJlcXVpcmUoXCJzdHJpcC1qc29uLWNvbW1lbnRzXCIpXG4gICAgICAgICAgZXh0ZXJuYWxPcHRpb25zID0gSlNPTi5wYXJzZShzdHJpcChjb250ZW50cykpXG4gICAgICAgIGNhdGNoIGVcbiAgICAgICAgICBqc29uRXJyb3IgPSBlLm1lc3NhZ2VcbiAgICAgICAgICBsb2dnZXIuZGVidWcgXCJGYWlsZWQgcGFyc2luZyBjb25maWcgYXMgSlNPTjogXCIgKyBjb25maWdQYXRoXG4gICAgICAgICAgIyBBdHRlbXB0IGFzIFlBTUxcbiAgICAgICAgICB0cnlcbiAgICAgICAgICAgIHlhbWwgPz0gcmVxdWlyZShcInlhbWwtZnJvbnQtbWF0dGVyXCIpXG4gICAgICAgICAgICBleHRlcm5hbE9wdGlvbnMgPSB5YW1sLnNhZmVMb2FkKGNvbnRlbnRzKVxuICAgICAgICAgIGNhdGNoIGVcbiAgICAgICAgICAgIHRpdGxlID0gXCJBdG9tIEJlYXV0aWZ5IGZhaWxlZCB0byBwYXJzZSBjb25maWcgYXMgSlNPTiBvciBZQU1MXCJcbiAgICAgICAgICAgIGRldGFpbCA9IFwiXCJcIlxuICAgICAgICAgICAgICAgICAgICAgUGFyc2luZyAnLmpzYmVhdXRpZnlyYycgYXQgI3tjb25maWdQYXRofVxuICAgICAgICAgICAgICAgICAgICAgSlNPTjogI3tqc29uRXJyb3J9XG4gICAgICAgICAgICAgICAgICAgICBZQU1MOiAje2UubWVzc2FnZX1cbiAgICAgICAgICAgICAgICAgICAgIFwiXCJcIlxuICAgICAgICAgICAgYXRvbT8ubm90aWZpY2F0aW9ucy5hZGRXYXJuaW5nKHRpdGxlLCB7XG4gICAgICAgICAgICAgIGRldGFpbFxuICAgICAgICAgICAgICBkaXNtaXNzYWJsZSA6IHRydWVcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBsb2dnZXIuZGVidWcgXCJGYWlsZWQgcGFyc2luZyBjb25maWcgYXMgWUFNTCBhbmQgSlNPTjogXCIgKyBjb25maWdQYXRoXG4gICAgICAgICAgICBleHRlcm5hbE9wdGlvbnMgPSB7fVxuICAgIGVsc2VcbiAgICAgIGV4dGVybmFsT3B0aW9ucyA9IHt9XG4gICAgcmV0dXJuIGV4dGVybmFsT3B0aW9uc1xuXG4gIGdldE9wdGlvbnNGb3JQYXRoIDogKGVkaXRlZEZpbGVQYXRoLCBlZGl0b3IpIC0+XG4gICAgbGFuZ3VhZ2VOYW1lc3BhY2VzID0gQGxhbmd1YWdlcy5uYW1lc3BhY2VzXG5cblxuICAgICMgRWRpdG9yIE9wdGlvbnNcbiAgICBlZGl0b3JPcHRpb25zID0ge31cbiAgICBpZiBlZGl0b3I/XG5cbiAgICAgICMgR2V0IGN1cnJlbnQgQXRvbSBlZGl0b3IgY29uZmlndXJhdGlvblxuICAgICAgaXNTZWxlY3Rpb24gPSAhIWVkaXRvci5nZXRTZWxlY3RlZFRleHQoKVxuICAgICAgc29mdFRhYnMgPSBlZGl0b3Iuc29mdFRhYnNcbiAgICAgIHRhYkxlbmd0aCA9IGVkaXRvci5nZXRUYWJMZW5ndGgoKVxuICAgICAgZWRpdG9yT3B0aW9ucyA9XG4gICAgICAgIGluZGVudF9zaXplIDogKCBpZiBzb2Z0VGFicyB0aGVuIHRhYkxlbmd0aCBlbHNlIDEpXG4gICAgICAgIGluZGVudF9jaGFyIDogKCBpZiBzb2Z0VGFicyB0aGVuIFwiIFwiIGVsc2UgXCJcXHRcIilcbiAgICAgICAgaW5kZW50X3dpdGhfdGFicyA6IG5vdCBzb2Z0VGFic1xuXG4gICAgIyBGcm9tIFBhY2thZ2UgU2V0dGluZ3NcbiAgICBjb25maWdPcHRpb25zID0gQGdldENvbmZpZ09wdGlvbnNGcm9tU2V0dGluZ3MobGFuZ3VhZ2VOYW1lc3BhY2VzKVxuXG5cbiAgICAjIEdldCBjb25maWd1cmF0aW9uIGluIFVzZXIncyBIb21lIGRpcmVjdG9yeVxuICAgIHVzZXJIb21lID0gQGdldFVzZXJIb21lKClcblxuXG4gICAgIyBGQUtFRklMRU5BTUUgZm9yY2VzIGBwYXRoYCB0byB0cmVhdCBhcyBmaWxlIHBhdGggYW5kIGl0cyBwYXJlbnQgZGlyZWN0b3J5XG4gICAgIyBpcyB0aGUgdXNlckhvbWUuIFNlZSBpbXBsZW1lbnRhdGlvbiBvZiBmaW5kQ29uZmlnXG4gICAgIyBhbmQgaG93IHBhdGguZGlybmFtZShESVJFQ1RPUlkpIHJldHVybnMgdGhlIHBhcmVudCBkaXJlY3Rvcnkgb2YgRElSRUNUT1JZXG4gICAgaG9tZU9wdGlvbnMgPSBAZ2V0Q29uZmlnKHBhdGguam9pbih1c2VySG9tZSwgXCJGQUtFRklMRU5BTUVcIiksIGZhbHNlKVxuICAgIGlmIGVkaXRlZEZpbGVQYXRoP1xuXG4gICAgICAjIEhhbmRsZSBFZGl0b3JDb25maWcgb3B0aW9uc1xuICAgICAgIyBodHRwOi8vZWRpdG9yY29uZmlnLm9yZy9cbiAgICAgIGVkaXRvcmNvbmZpZyA/PSByZXF1aXJlKCdlZGl0b3Jjb25maWcnKVxuICAgICAgZWRpdG9yQ29uZmlnT3B0aW9ucyA9IGVkaXRvcmNvbmZpZy5wYXJzZShlZGl0ZWRGaWxlUGF0aClcbiAgICAgIC50aGVuKChlZGl0b3JDb25maWdPcHRpb25zKSAtPlxuXG4gICAgICAgIGxvZ2dlci52ZXJib3NlKCdlZGl0b3JDb25maWdPcHRpb25zJywgZWRpdG9yQ29uZmlnT3B0aW9ucylcblxuICAgICAgICAjIFRyYW5zZm9ybSBFZGl0b3JDb25maWcgdG8gQXRvbSBCZWF1dGlmeSdzIGNvbmZpZyBzdHJ1Y3R1cmUgYW5kIG5hbWluZ1xuICAgICAgICBpZiBlZGl0b3JDb25maWdPcHRpb25zLmluZGVudF9zdHlsZSBpcyAnc3BhY2UnXG4gICAgICAgICAgZWRpdG9yQ29uZmlnT3B0aW9ucy5pbmRlbnRfY2hhciA9IFwiIFwiXG5cbiAgICAgICAgIyBpZiAoZWRpdG9yQ29uZmlnT3B0aW9ucy5pbmRlbnRfc2l6ZSlcbiAgICAgICAgIyBlZGl0b3JDb25maWdPcHRpb25zLmluZGVudF9zaXplID0gY29uZmlnLmluZGVudF9zaXplXG4gICAgICAgIGVsc2UgaWYgZWRpdG9yQ29uZmlnT3B0aW9ucy5pbmRlbnRfc3R5bGUgaXMgJ3RhYidcbiAgICAgICAgICBlZGl0b3JDb25maWdPcHRpb25zLmluZGVudF9jaGFyID0gXCJcXHRcIlxuICAgICAgICAgIGVkaXRvckNvbmZpZ09wdGlvbnMuaW5kZW50X3dpdGhfdGFicyA9IHRydWVcbiAgICAgICAgICBpZiAoZWRpdG9yQ29uZmlnT3B0aW9ucy50YWJfd2lkdGgpXG4gICAgICAgICAgICBlZGl0b3JDb25maWdPcHRpb25zLmluZGVudF9zaXplID0gZWRpdG9yQ29uZmlnT3B0aW9ucy50YWJfd2lkdGhcblxuICAgICAgICAjIE5lc3Qgb3B0aW9ucyB1bmRlciBfZGVmYXVsdCBuYW1lc3BhY2VcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBfZGVmYXVsdDpcbiAgICAgICAgICAgIGVkaXRvckNvbmZpZ09wdGlvbnNcbiAgICAgICAgICB9XG4gICAgICApXG5cbiAgICAgICMgR2V0IGFsbCBvcHRpb25zIGluIGNvbmZpZ3VyYXRpb24gZmlsZXMgZnJvbSB0aGlzIGRpcmVjdG9yeSB1cHdhcmRzIHRvIHJvb3RcbiAgICAgIHByb2plY3RPcHRpb25zID0gW11cbiAgICAgIHAgPSBwYXRoLmRpcm5hbWUoZWRpdGVkRmlsZVBhdGgpXG5cblxuICAgICAgIyBDaGVjayBpZiBwIGlzIHJvb3QgKHRvcCBkaXJlY3RvcnkpXG4gICAgICB3aGlsZSBwIGlzbnQgcGF0aC5yZXNvbHZlKHAsIFwiLi4vXCIpXG5cbiAgICAgICAgIyBHZXQgY29uZmlnIGZvciBwXG4gICAgICAgIHBmID0gcGF0aC5qb2luKHAsIFwiRkFLRUZJTEVOQU1FXCIpXG4gICAgICAgIHBjID0gQGdldENvbmZpZyhwZiwgZmFsc2UpXG5cbiAgICAgICAgaXNOZXN0ZWQgPSBAaXNOZXN0ZWRPcHRpb25zKHBjKVxuICAgICAgICB1bmxlc3MgaXNOZXN0ZWRcbiAgICAgICAgICBwYyA9IHtcbiAgICAgICAgICAgIF9kZWZhdWx0OiBwY1xuICAgICAgICAgIH1cblxuICAgICAgICAjIEFkZCBjb25maWcgZm9yIHAgdG8gcHJvamVjdCdzIGNvbmZpZyBvcHRpb25zXG4gICAgICAgIHByb2plY3RPcHRpb25zLnB1c2gocGMpXG5cbiAgICAgICAgIyBsb2dnZXIudmVyYm9zZSBwLCBwY1xuICAgICAgICAjIE1vdmUgdXB3YXJkc1xuICAgICAgICBwID0gcGF0aC5yZXNvbHZlKHAsIFwiLi4vXCIpXG4gICAgZWxzZVxuICAgICAgZWRpdG9yQ29uZmlnT3B0aW9ucyA9IHt9XG4gICAgICBwcm9qZWN0T3B0aW9ucyA9IFtdXG5cbiAgICAjIENvbWJpbmUgYWxsIG9wdGlvbnMgdG9nZXRoZXJcbiAgICBhbGxPcHRpb25zID0gW1xuICAgICAge1xuICAgICAgICBfZGVmYXVsdDpcbiAgICAgICAgICBlZGl0b3JPcHRpb25zXG4gICAgICB9LFxuICAgICAgY29uZmlnT3B0aW9ucyxcbiAgICAgIHtcbiAgICAgICAgX2RlZmF1bHQ6XG4gICAgICAgICAgaG9tZU9wdGlvbnNcbiAgICAgIH0sXG4gICAgICBlZGl0b3JDb25maWdPcHRpb25zXG4gICAgXVxuICAgICMgUmV2ZXJzZSBhbmQgYWRkIHByb2plY3RPcHRpb25zIHRvIGFsbCBvcHRpb25zXG4gICAgcHJvamVjdE9wdGlvbnMucmV2ZXJzZSgpXG4gICAgYWxsT3B0aW9ucyA9IGFsbE9wdGlvbnMuY29uY2F0KHByb2plY3RPcHRpb25zKVxuXG4gICAgIyBsb2dnZXIudmVyYm9zZShhbGxPcHRpb25zKVxuICAgIHJldHVybiBhbGxPcHRpb25zXG5cbiAgaXNOZXN0ZWRPcHRpb25zIDogKGN1cnJPcHRpb25zKSAtPlxuICAgIGNvbnRhaW5zTmVzdGVkID0gZmFsc2VcbiAgICBrZXkgPSB1bmRlZmluZWRcblxuICAgICMgQ2hlY2sgaWYgYWxyZWFkeSBuZXN0ZWQgdW5kZXIgX2RlZmF1bHRcbiAgICBpZiBjdXJyT3B0aW9ucy5fZGVmYXVsdFxuICAgICAgcmV0dXJuIHRydWVcblxuICAgICMgQ2hlY2sgdG8gc2VlIGlmIGNvbmZpZyBmaWxlIHVzZXMgbmVzdGVkIG9iamVjdCBmb3JtYXQgdG8gc3BsaXQgdXAganMvY3NzL2h0bWwgb3B0aW9uc1xuICAgIGZvciBrZXkgb2YgY3Vyck9wdGlvbnNcblxuICAgICAgIyBDaGVjayBpZiBpcyBzdXBwb3J0ZWQgbGFuZ3VhZ2VcbiAgICAgIGlmIF8uaW5kZXhPZihAbGFuZ3VhZ2VzLm5hbWVzcGFjZXMsIGtleSkgPj0gMCBhbmQgdHlwZW9mIGN1cnJPcHRpb25zW2tleV0gaXMgXCJvYmplY3RcIiAjIENoZWNrIGlmIG5lc3RlZCBvYmplY3QgKG1vcmUgb3B0aW9ucyBpbiB2YWx1ZSlcbiAgICAgICAgY29udGFpbnNOZXN0ZWQgPSB0cnVlXG4gICAgICAgIGJyZWFrICMgRm91bmQsIGJyZWFrIG91dCBvZiBsb29wLCBubyBuZWVkIHRvIGNvbnRpbnVlXG5cbiAgICByZXR1cm4gY29udGFpbnNOZXN0ZWRcblxuICBnZXRPcHRpb25zIDogKHNlbGVjdGlvbnMsIGFsbE9wdGlvbnMpID0+XG4gICAgc2VsZiA9IHRoaXNcbiAgICBfID89IHJlcXVpcmUoXCJsb2Rhc2hcIilcbiAgICBleHRlbmQgPz0gcmVxdWlyZShcImV4dGVuZFwiKVxuXG4gICAgbG9nZ2VyLnZlcmJvc2UoJ2dldE9wdGlvbnMgc2VsZWN0aW9ucycsIHNlbGVjdGlvbnMsIGFsbE9wdGlvbnMpXG5cbiAgICAjIGxvZ2dlci52ZXJib3NlKHNlbGVjdGlvbiwgYWxsT3B0aW9ucyk7XG4gICAgIyBSZWR1Y2UgYWxsIG9wdGlvbnMgaW50byBjb3JyZWN0bHkgbWVyZ2VkIG9wdGlvbnMuXG4gICAgb3B0aW9ucyA9IF8ucmVkdWNlKGFsbE9wdGlvbnMsIChyZXN1bHQsIGN1cnJPcHRpb25zKSA9PlxuICAgICAgY29sbGVjdGVkQ29uZmlnID0gY3Vyck9wdGlvbnMuX2RlZmF1bHQgb3Ige31cbiAgICAgIGNvbnRhaW5zTmVzdGVkID0gQGlzTmVzdGVkT3B0aW9ucyhjdXJyT3B0aW9ucylcbiAgICAgIGxvZ2dlci52ZXJib3NlKGNvbnRhaW5zTmVzdGVkLCBjdXJyT3B0aW9ucylcbiAgICAgICMgbG9nZ2VyLnZlcmJvc2UoY29udGFpbnNOZXN0ZWQsIGN1cnJPcHRpb25zKTtcblxuICAgICAgIyBDcmVhdGUgYSBmbGF0IG9iamVjdCBvZiBjb25maWcgb3B0aW9ucyBpZiBuZXN0ZWQgZm9ybWF0IHdhcyB1c2VkXG4gICAgICB1bmxlc3MgY29udGFpbnNOZXN0ZWRcbiAgICAgICAgIyBfLm1lcmdlIGNvbGxlY3RlZENvbmZpZywgY3Vyck9wdGlvbnNcbiAgICAgICAgY3Vyck9wdGlvbnMgPSB7XG4gICAgICAgICAgX2RlZmF1bHQ6IGN1cnJPcHRpb25zXG4gICAgICAgIH1cblxuICAgICAgIyBNZXJnZSB3aXRoIHNlbGVjdGVkIG9wdGlvbnNcbiAgICAgICMgd2hlcmUgYHNlbGVjdGlvbmAgY291bGQgYmUgYGh0bWxgLCBganNgLCAnY3NzJywgZXRjXG4gICAgICBmb3Igc2VsZWN0aW9uIGluIHNlbGVjdGlvbnNcbiAgICAgICAgIyBNZXJnZSBjdXJyZW50IG9wdGlvbnMgb24gdG9wIG9mIGZhbGxiYWNrIG9wdGlvbnNcbiAgICAgICAgbG9nZ2VyLnZlcmJvc2UoJ29wdGlvbnMnLCBzZWxlY3Rpb24sIGN1cnJPcHRpb25zW3NlbGVjdGlvbl0pXG4gICAgICAgIF8ubWVyZ2UgY29sbGVjdGVkQ29uZmlnLCBjdXJyT3B0aW9uc1tzZWxlY3Rpb25dXG4gICAgICAgIGxvZ2dlci52ZXJib3NlKCdvcHRpb25zJywgc2VsZWN0aW9uLCBjb2xsZWN0ZWRDb25maWcpXG5cbiAgICAgIGV4dGVuZCByZXN1bHQsIGNvbGxlY3RlZENvbmZpZ1xuICAgICwge30pXG5cblxuICAgICMgVE9ETzogQ2xlYW4uXG4gICAgIyBUaGVyZSBpcyBhIGJ1ZyBpbiBub3B0XG4gICAgIyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL25wbS9ub3B0L2lzc3Vlcy8zOFxuICAgICMgbG9nZ2VyLnZlcmJvc2UoJ3ByZS1jbGVhbicsIEpTT04uc3RyaW5naWZ5KG9wdGlvbnMpKTtcbiAgICAjIG9wdGlvbnMgPSBjbGVhbk9wdGlvbnMob3B0aW9ucywga25vd25PcHRzKTtcbiAgICAjIGxvZ2dlci52ZXJib3NlKCdwb3N0LWNsZWFuJywgSlNPTi5zdHJpbmdpZnkob3B0aW9ucykpO1xuICAgIG9wdGlvbnNcbiJdfQ==
